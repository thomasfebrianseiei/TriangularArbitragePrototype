// File: utils/konstanta.js

const path = require('path');

// RPC configuration dari environment variables
const BSC_RPC_URL = process.env.BSC_RPC_URL || 'https://bsc-dataseed.binance.org/';

// Daftar backup RPC dari env
const BACKUP_RPC_URLS = [];

// Tambahkan URL dari environment variables jika ada
if (process.env.BSC_RPC_URL1) BACKUP_RPC_URLS.push(process.env.BSC_RPC_URL1);
if (process.env.BSC_RPC_URL2) BACKUP_RPC_URLS.push(process.env.BSC_RPC_URL2);
// Jika tidak ada backup yang dikonfigurasi, gunakan default
if (BACKUP_RPC_URLS.length === 0) {
    BACKUP_RPC_URLS.push(
        'https://bsc-dataseed.ninicoin.io/'
    );
}

// Transaction and execution settings
const GAS_PRICE_GWEI = process.env.GAS_PRICE_GWEI || '5';
const GAS_LIMIT = process.env.GAS_LIMIT || '3000000';
const MIN_PROFIT_PERCENTAGE = parseFloat(process.env.MIN_PROFIT_PERCENTAGE || '1');
const MAX_GAS_PRICE_GWEI = parseInt(process.env.MAX_GAS_PRICE_GWEI || '10');
const EXECUTION_ENABLED = process.env.EXECUTION_ENABLED !== 'false';

// Pengaturan RPC tambahan
const RPC_TIMEOUT_MS = parseInt(process.env.RPC_TIMEOUT_MS || '30000');
const RPC_RETRY_COUNT = parseInt(process.env.RPC_RETRY_COUNT || '3');
const RPC_COOLDOWN_MS = parseInt(process.env.RPC_COOLDOWN_MS || '5000');
const RPC_HEALTH_CHECK_INTERVAL_MS = parseInt(process.env.RPC_HEALTH_CHECK_INTERVAL_MS || '120000');
const RPC_DEBUG_ENABLED = process.env.RPC_DEBUG_ENABLED === 'true';

// Paths for data storage
const BASE_DIR = path.resolve(__dirname, '..');
const DATA_DIR = path.join(BASE_DIR, 'data');
const LOG_DIR = path.join(DATA_DIR, 'logs');
const HISTORY_DIR = path.join(DATA_DIR, 'history');
const HISTORY_FILE = path.join(HISTORY_DIR, 'arbitrage_history.json');
const STATS_FILE = path.join(HISTORY_DIR, 'performance_stats.json');

// Router addresses (tidak diubah)
const ROUTER_ADDRESSES = {
    PANCAKESWAP: '0x10ED43C718714eb63d5aA57B78B54704E256024E',
    BISWAP: '0x3a6d8cA21D1CF76F653A67577FA0D27453350dD8'
};

// Token addresses (tidak diubah)
const TOKEN_ADDRESSES = {
    WBNB: '0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c',
    BUSD: '0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56',
    USDT: '0x55d398326f99059fF775485246999027B3197955',
    USDC: '0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d',
    BTCB: '0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c',
    ETH: '0x2170Ed0880ac9A755fd29B2688956BD959F933F8',
    CAKE: '0x0E09FaBB73Bd3Ade0a17ECC321fD13a19e81cE82',
    BSW: '0x965F527D9159dCe6288a2219DB51fc6Eef120dD1',
    DOT: '0x7083609fCE4d1d8Dc0C979AAb8c869Ea2C873402',
    UNI: '0xBf5140A22578168FD562DCcF235E5D43A02ce9B1',
    ADA: '0x3EE2200Efb3400fAbB9AacF31297cBdD1d435D47',
    TUSD: '0x14016E85a25aeb13065688cAFB43044C2ef86784',
    UST: '0x23396cF899Ca06c4472205fC903bDB4de249D6fC',
    LTC: '0x4338665CBB7B2485A8855A139b75D5e34AB0DB94',
    VAI: '0x4BD17003473389A42DAF6a0a729f6Fdb328BbBd7',
    XRP: '0x1D2F0da169ceB9fC7B3144628dB156f3F6c60dBE',
    DOGE: '0xbA2aE424d960c26247Dd6c32edC70B295c744C43',
    LINK: '0xF8A0BF9cF54Bb92F17374d9e9A321E6a111a51bD',
    DAI: '0x1AF3F329e8BE154074D8769D1FFa4eE058B1DBc3',
    BAKE: '0xE02dF9e3e622DeBdD69fb838bB799E3F168902c5',
    FIL: '0x0D8Ce2A99Bb6e3B7Db580eD848240e4a0F9aE153',
    XVS: '0xcF6BB5389c92Bdda8a3747Ddb454cB7a64626C63',
    TWT: '0x4B0F1812e5Df2A09796481Ff14017e6005508003',
    BUNNY: '0xC9849E6fdB743d08fAeE3E34dd2D1bc69EA11a51',
    IRON: '0x7b65B489fE53fCE1F6548Db886C08aD73111DDd8',
    WEX: '0xa9c41A46a6B3531d28d5c32F6633dd2fF05dFB90',
    BFG: '0xBb46693eBbEa1aC2070E59B4D043b47e2e095f86',
    RABBIT: '0x95a1199EBA84ac5f19546519e287d43D2F0E1b41',
    DPET: '0xfb62AE373acA027177D1c18Ee0862817f9080d08',
    TENFI: '0xd15C444F1199Ae72795eba15E8C1db44E47abF62'
};

// Pancakeswap pair addresses (tidak diubah)
const PANCAKESWAP_PAIRS = {
    'WBNB-USDT': '0x16b9a82891338f9bA80E2D6970FddA79D1eb0daE',
    'USDT-BUSD': '0x7EFaEf62fDdCCa950418312c6C91Aef321375A00',
    'BUSD-WBNB': '0x58F876857a02D6762E0101bb5C46A8c1ED44Dc16',
    'WBNB-BTCB': '0x61EB789d75A95CAa3fF50ed7E47b96c132fEc082',
    'BTCB-USDT': '0x8f16A4234D629634539A9E39455BB911fEe05061',
    'WBNB-ETH': '0x74E4716E431f45807DCF19f284c7aA99F18a4fbc',
    'ETH-USDT': '0x531FEbfeb9a61D948c384ACFBe6dCc51057AEa7e',
    'WBNB-CAKE': '0x0eD7e52944161450477ee417DE9Cd3a859b14fD0',
    'CAKE-USDT': '0xA39Af17CE4a8eb807E076805Da1e2B8EA7D0755b',
    'WBNB-BSW': '0x8CA3fF14A52b080C54A6d1a405eecA02959d39fE',
    'BSW-USDT': '0xC5E1C3B7CC9eE570f8588359B27aA599dB9E4721'
};

module.exports = {
    BSC_RPC_URL,
    BACKUP_RPC_URLS,
    GAS_PRICE_GWEI,
    GAS_LIMIT,
    MIN_PROFIT_PERCENTAGE,
    MAX_GAS_PRICE_GWEI,
    EXECUTION_ENABLED,
    RPC_TIMEOUT_MS,
    RPC_RETRY_COUNT,
    RPC_COOLDOWN_MS,
    RPC_HEALTH_CHECK_INTERVAL_MS,
    RPC_DEBUG_ENABLED,
    DATA_DIR,
    LOG_DIR,
    HISTORY_DIR,
    HISTORY_FILE,
    STATS_FILE,
    ROUTER_ADDRESSES,
    TOKEN_ADDRESSES,
    PANCAKESWAP_PAIRS
};